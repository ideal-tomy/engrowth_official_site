# Engrowth公式サイト リファクタリング計画

## 現状分析

### 主要な問題点

1. **コードの重複**
   - `FullBleed1440`コンポーネントが6ファイルで重複定義
   - 似たようなページ構造の重複（Hero、Section、Containerの組み合わせ）
   - スタイリングの重複（shadow、padding、margin等）

2. **コンポーネント設計の問題**
   - 単一責任原則に違反（大きなコンポーネントが複数の責任を持つ）
   - 再利用性の低いコンポーネント
   - プロップスの型安全性が不十分

3. **スタイルの一貫性不足**
   - 65箇所でshadowクラスが使用されているが、統一性がない
   - カラーパレットの不統一（#d30306、#db3633等の混在）
   - レスポンシブデザインの不統一

4. **パフォーマンスの問題**
   - 不要な再レンダリング
   - 画像最適化の不備
   - バンドルサイズの肥大化

## リファクタリング実施計画

### Phase 1: 基盤整備（優先度：高）

#### 1.1 共通コンポーネントの統一
**期間**: 2-3日

- [ ] **FullBleed1440コンポーネントの共通化**
  - [ ] `src/components/layout/FullBleed1440.tsx`として独立
  - [ ] 6ファイルから重複コードを削除
  - [ ] TypeScript型定義の追加

- [ ] **レイアウトコンポーネントの統一**
  - [ ] `PageLayout`コンポーネントの作成
  - [ ] Hero + Section + Containerの組み合わせを統一
  - [ ] メタデータ管理の統一

#### 1.2 デザインシステムの統一
**期間**: 2-3日

- [ ] **カラーパレットの統一**
  - [ ] ブランドカラーの統一（#d30306に統一）
  - [ ] カラー変数の整理とCSS変数の活用
  - [ ] ダークモード対応の準備

- [ ] **タイポグラフィの統一**
  - [ ] フォントサイズの階層化
  - [ ] 行間・文字間隔の統一
  - [ ] レスポンシブタイポグラフィの実装

- [ ] **スペーシングシステムの統一**
  - [ ] 8pxベースのスペーシングシステム
  - [ ] コンポーネント間のマージン・パディング統一
  - [ ] レスポンシブスペーシングの実装

### Phase 2: コンポーネント最適化（優先度：高）

#### 2.1 UIコンポーネントの改善
**期間**: 3-4日

- [ ] **Buttonコンポーネントの拡張**
  - [ ] バリエーションの統一（primary, secondary, outline等）
  - [ ] サイズの統一（sm, md, lg, xl）
  - [ ] ローディング状態の対応
  - [ ] アクセシビリティの向上

- [ ] **Cardコンポーネントの統一**
  - [ ] ベースCardコンポーネントの作成
  - [ ] バリエーション（PricingCard, FeatureCard等）の統一
  - [ ] ホバーエフェクトの統一
  - [ ] シャドウの統一

- [ ] **Typographyコンポーネントの改善**
  - [ ] バリエーションの整理
  - [ ] レスポンシブ対応の強化
  - [ ] アクセシビリティの向上

#### 2.2 レイアウトコンポーネントの最適化
**期間**: 2-3日

- [ ] **Sectionコンポーネントの改善**
  - [ ] 背景色の統一
  - [ ] パディングの統一
  - [ ] レスポンシブ対応の強化

- [ ] **Containerコンポーネントの改善**
  - [ ] 最大幅の統一
  - [ ] パディングの統一
  - [ ] レスポンシブ対応の強化

- [ ] **Gridシステムの統一**
  - [ ] カスタムGridコンポーネントの作成
  - [ ] レスポンシブグリッドの統一
  - [ ] ギャップの統一

### Phase 3: ページ構造の最適化（優先度：中）

#### 3.1 ページテンプレートの統一
**期間**: 3-4日

- [ ] **ページレイアウトの統一**
  - [ ] `PageTemplate`コンポーネントの作成
  - [ ] メタデータ管理の統一
  - [ ] SEO最適化の統一

- [ ] **ヒーローセクションの統一**
  - [ ] `HeroSection`コンポーネントの統一
  - [ ] 画像最適化の統一
  - [ ] レスポンシブ対応の統一

- [ ] **セクション構造の統一**
  - [ ] セクション間のスペーシング統一
  - [ ] セクションタイトルの統一
  - [ ] セクション背景の統一

#### 3.2 データ管理の改善
**期間**: 2-3日

- [ ] **定数の統一**
  - [ ] カラーパレットの定数化
  - [ ] スペーシングの定数化
  - [ ] ブレークポイントの定数化

- [ ] **型定義の改善**
  - [ ] 共通の型定義ファイルの作成
  - [ ] プロップスの型安全性の向上
  - [ ] インターフェースの統一

### Phase 4: パフォーマンス最適化（優先度：中）

#### 4.1 画像最適化
**期間**: 2-3日

- [ ] **画像コンポーネントの統一**
  - [ ] `OptimizedImage`コンポーネントの作成
  - [ ] 遅延読み込みの統一
  - [ ] 画像サイズの最適化

- [ ] **画像管理の改善**
  - [ ] 画像パスの統一
  - [ ] 画像フォーマットの最適化
  - [ ] WebP対応の統一

#### 4.2 バンドル最適化
**期間**: 2-3日

- [ ] **コード分割の改善**
  - [ ] 動的インポートの活用
  - [ ] コンポーネントの遅延読み込み
  - [ ] 不要な依存関係の削除

- [ ] **Tree Shakingの最適化**
  - [ ] 未使用コードの削除
  - [ ] インポートの最適化
  - [ ] バンドルサイズの監視

### Phase 5: アクセシビリティ・SEO最適化（優先度：低）

#### 5.1 アクセシビリティの向上
**期間**: 2-3日

- [ ] **ARIA属性の統一**
  - [ ] セマンティックHTMLの活用
  - [ ] キーボードナビゲーションの改善
  - [ ] スクリーンリーダー対応の向上

- [ ] **カラーコントラストの改善**
  - [ ] WCAG準拠の確認
  - [ ] カラーコントラスト比の最適化
  - [ ] フォーカス表示の改善

#### 5.2 SEO最適化
**期間**: 1-2日

- [ ] **メタデータの統一**
  - [ ] タイトル・ディスクリプションの統一
  - [ ] Open Graph対応の統一
  - [ ] 構造化データの追加

## 実装優先順位

### 即座に実行すべき項目（緊急度：高）
1. **FullBleed1440コンポーネントの共通化**
2. **カラーパレットの統一**
3. **Buttonコンポーネントの統一**

### 短期間で実行すべき項目（緊急度：中）
1. **Cardコンポーネントの統一**
2. **Typographyコンポーネントの改善**
3. **Sectionコンポーネントの改善**

### 中長期的に実行すべき項目（緊急度：低）
1. **ページテンプレートの統一**
2. **パフォーマンス最適化**
3. **アクセシビリティの向上**

## 期待される効果

### 開発効率の向上
- コードの重複削除により、メンテナンス性が向上
- 統一されたコンポーネントにより、開発速度が向上
- 型安全性の向上により、バグの発生を抑制

### パフォーマンスの向上
- バンドルサイズの削減
- レンダリング性能の向上
- 画像最適化による読み込み速度の向上

### ユーザー体験の向上
- 一貫したデザインによるブランド体験の向上
- アクセシビリティの向上
- レスポンシブデザインの統一

## リスク管理

### 技術的リスク
- 既存機能の破壊
- デザインの一貫性の崩れ
- パフォーマンスの劣化

### 対策
- 段階的な実装
- 十分なテスト
- ロールバック計画の準備

## 実装スケジュール

### Week 1-2: Phase 1（基盤整備）
### Week 3-4: Phase 2（コンポーネント最適化）
### Week 5-6: Phase 3（ページ構造最適化）
### Week 7-8: Phase 4（パフォーマンス最適化）
### Week 9-10: Phase 5（アクセシビリティ・SEO最適化）

## 成功指標

### 技術指標
- コードの重複率: 現在30% → 目標5%以下
- バンドルサイズ: 現在の80%以下
- レンダリング時間: 現在の70%以下

### 品質指標
- TypeScriptエラー: 0件
- ESLintエラー: 0件
- アクセシビリティスコア: 90点以上

### 開発効率指標
- 新機能開発時間: 現在の60%以下
- バグ修正時間: 現在の50%以下
- コードレビュー時間: 現在の70%以下
